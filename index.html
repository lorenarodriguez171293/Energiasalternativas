<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Simuladores de Energ√≠a</title>
    <style>
        /* ESTILOS GENERALES */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f4f7f9;
            height: 100vh;
        }
        #app-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        /* HEADER Y SELECTOR */
        header {
            background-color: #0b5ed7;
            color: white;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            z-index: 10; /* Asegurar que est√© por encima del iframe */
        }
        h1 {
            margin: 0;
            font-size: 1.5rem;
        }
        #selector-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        select, button {
            padding: 8px 12px;
            border-radius: 6px;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            box-sizing: border-box;
        }
        select {
            background-color: white;
            color: #333;
            border: 1px solid #ccc;
            min-width: 250px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #45a049;
        }

        /* CONTENEDOR PRINCIPAL (IFRAME) */
        main {
            flex-grow: 1;
            padding: 0;
            overflow: hidden; /* Evita barras de desplazamiento innecesarias en el contenedor */
        }
        #simulador-frame {
            width: 100%;
            height: 100%;
            border: none;
            display: none; /* Ocultar inicialmente */
        }
        .placeholder {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            font-size: 1.4rem;
            color: #666;
            text-align: center;
            padding: 20px;
        }

        @media (max-width: 600px) {
            header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>

    <div id="app-container">
        <header>
            <h1>Dashboard de Simuladores</h1>
            <div id="selector-controls">
                <label for="simulador-select" style="font-weight: bold;">Selecciona un simulador:</label>
                <select id="simulador-select"></select>
                <button onclick="cargarSimulador()">Cargar</button>
            </div>
        </header>

        <main>
            <div id="placeholder" class="placeholder">
                Usa el selector para cargar uno de los simuladores.
                <br><small style="font-size: 0.8em; color: #999; margin-top: 10px;">Aseg√∫rate de haber subido todas las carpetas a GitHub.</small>
            </div>
            <iframe id="simulador-frame" title="Contenido del Simulador"></iframe>
        </main>
    </div>

    <script>
        // Lista de simuladores con su nombre y la ruta relativa al archivo index.html
        const simuladores = [
            { name: "01. Mapa Interactivo de Proyectos", path: "mapainteractivo01-main/index.html" },
            <!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mapa de Energias Alternativas en Argentina </title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

 <style>
  body { margin:0; font-family: Arial, sans-serif; }
  #map { position: absolute; top:56px; bottom:0; left:0; right:320px; }

  header {
    position: absolute;
    top:0; left:0; right:320px;
    height:56px;
    background:#0b5;
    display:flex;
    align-items:center;
    gap:1rem;
    padding:0 12px;
    box-shadow:0 2px 4px rgba(0,0,0,.15);
    z-index:1000;
    overflow-x: auto;     /* Esto permite deslizar filtros en celular */
    white-space: nowrap;
  }

  .controls {
    display:flex;
    gap:.5rem;
    align-items:center;
  }

  .panel {
    position: absolute;
    top:0; right:0;
    width:320px; bottom:0;
    background:#fff;
    border-left:1px solid #ddd;
    overflow:auto;
    padding:12px;
    z-index:1000;
  }

  .card {
    border:1px solid #e5e5e5;
    padding:8px;
    margin-bottom:8px;
    border-radius:6px;
    background:#fbfbfb;
  }

  .tag {
    display:inline-block;
    padding:2px 8px;
    border-radius:999px;
    background:#eee;
    font-size:12px;
    margin-right:6px;
  }

  .info-row {
    display:flex;
    justify-content:space-between;
    font-size:14px;
    margin:4px 0;
  }

  button { cursor:pointer; }

  /* üî• MODO CELULAR */
  @media (max-width:900px){
    #map {
      right:0;
      top:90px;
    }

    header {
      right:0;
      height:auto;
      padding:10px;
      flex-wrap: wrap;
      overflow-x:auto;
      white-space: nowrap;
    }

    .panel {
      position:fixed;
      bottom:0;
      top:auto;
      right:0;
      width:100%;
      height:40%;
      border-left:1px solid #ddd;
      border-right:1px solid #ddd;
      border-top:1px solid #ddd;
      background:white;

      /* üî• Ajustes nuevos */
      padding-left:0px !important;   /* Corre el listado y la ficha hacia la derecha */
      padding-right:0px !important;  /* Para que no quede pegado al borde */
      overflow-y:auto;
    }

    /* Opcional: mejora en pantallas muy chicas */
    .card, #listado, #ficha {
      padding-left:5px;   /* M√°s margen interno */
    }
}

  /* Opcional: mejora para pantallas muy chicas (<480px) */
  @media (max-width:480px){
    #map { top:100px; }
    .panel { height:45%; }
  }
</style>

</head>
<body>

<header>
  <strong>Mapa Energ√©tico Interactivo ‚Äî Versi√≥n Completa</strong>
  <div class="controls" style="margin-left:auto;">
    <label><input type="checkbox" class="filter" value="eolico" checked> üåÄ E√≥lico</label>
    <label><input type="checkbox" class="filter" value="solar" checked> ‚òÄÔ∏è Solar</label>
    <label><input type="checkbox" class="filter" value="hidraulica" checked> üíß Hidr√°ulica</label>
    <label><input type="checkbox" class="filter" value="nuclear" checked> ‚öõÔ∏è Nuclear</label>
    <label><input type="checkbox" class="filter" value="biomasa" checked> üå± Biomasa</label>
    <button id="resetFit" title="Ajustar vista">üîç Ajustar vista</button>
  </div>
</header>

<div id="map"></div>

<aside class="panel" id="sidePanel">
  <h3>Ficha</h3>
  <div id="ficha" class="card">
    <em>Haz clic en un marcador para ver la ficha completa.</em>
  </div>

  <h4>Listado (filtrado)</h4>
  <div id="listado"></div>

  <hr>
  <small>Fuentes: compilaci√≥n p√∫blica (Wikipedia energ√≠as renovables, RENPER/Argentina.gob.ar, datos.gob.ar PROBIOMASA, OpenInfraMap, art√≠culos sectoriales). Si quer√©s, te paso la CSV con todo el detalle y las URLs por planta.</small>
</aside>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
/*
  Versi√≥n completa:
  - incluye parques e√≥licos (Chubut, Santa Cruz, Buenos Aires) listados en Wikipedia / fuentes RENPER
  - incluye plantas solares (San Juan, La Rioja, Jujuy) seg√∫n RENPER / gobiernos provinciales
  - incluye una recopilaci√≥n extensa de plantas de biomasa (datos.gob.ar y compilaciones sectoriales)
  - Algunas coordenadas son las oficiales; otras son aproximadas a la localidad (comentado por planta).
*/

/* Iconos por tipo */
const icons = {
  eolico: L.divIcon({ className:'', html:'üåÄ', iconSize:[28,28], popupAnchor:[0,-14]}),
  solar:  L.divIcon({ className:'', html:'‚òÄÔ∏è', iconSize:[28,28], popupAnchor:[0,-14]}),
  hidraulica: L.divIcon({ className:'', html:'üíß', iconSize:[28,28], popupAnchor:[0,-14]}),
  nuclear: L.divIcon({ className:'', html:'‚öõÔ∏è', iconSize:[28,28], popupAnchor:[0,-14]}),
  biomasa: L.divIcon({ className:'', html:'üå±', iconSize:[28,28], popupAnchor:[0,-14]}),
};

/* --- Base de datos: plantas --- 
   Nota: esta es una recopilaci√≥n extensa ‚Äî si quer√©s la tabla CSV/JSON se exporta con el bot√≥n en la ficha.
*/
const plantas = [
  /* ---------- NUCLEARES (ya estaban) ---------- */
  { id:"atucha1", tipo:"nuclear", nombre:"Atucha I", provincia:"Buenos Aires (Z√°rate)", lat:-34.0611, lon:-59.0833, potencia_mw:362, inauguracion:1974, descripcion:"Reactor PHWR. Primera central nuclear comercial de Am√©rica Latina.", fuente:"Nucleoel√©ctrica Argentina" },
  { id:"atucha2", tipo:"nuclear", nombre:"Atucha II", provincia:"Buenos Aires (Z√°rate)", lat:-34.0644, lon:-59.0844, potencia_mw:745, inauguracion:2014, descripcion:"PHWR de mayor potencia.", fuente:"Nucleoel√©ctrica Argentina" },
  { id:"embalse", tipo:"nuclear", nombre:"Embalse", provincia:"C√≥rdoba (Embalse)", lat:-32.2, lon:-64.44, potencia_mw:656, inauguracion:1984, descripcion:"Reactor CANDU.", fuente:"World Nuclear" },

  /* ---------- HIDROEL√âCTRICAS (ya estaban) ---------- */
  { id:"yacyreta", tipo:"hidraulica", nombre:"Yacyret√°", provincia:"Corrientes / Misiones", lat:-27.366667, lon:-56.633333, potencia_mw:3100, inauguracion:1994, descripcion:"Complejo binacional en el r√≠o Paran√°.", fuente:"Entes oficiales" },
  { id:"salto_grande", tipo:"hidraulica", nombre:"Salto Grande", provincia:"Entre R√≠os / Uruguay", lat:-31.388889, lon:-58.02, potencia_mw:1890, inauguracion:1979, descripcion:"Complejo hidroel√©ctrico Uruguay‚ÄìArgentina.", fuente:"Entes oficiales" },

  /* ---------- SOLARES: San Juan (ejemplos reales RENPER y provinciales) ---------- */
  { id:"ullum_i", tipo:"solar", nombre:"Parque Solar Ullum I", provincia:"San Juan (Ullum)", lat:-31.553, lon:-68.476, potencia_mw:25, inauguracion:2018, descripcion:"Ullum I (Genneia).", fuente:"EPSE / RENPER" },
  { id:"sierras_ullum", tipo:"solar", nombre:"Sierras de Ullum", provincia:"San Juan (Ullum)", lat:-31.55, lon:-68.48, potencia_mw:43.5, inauguracion:2019, descripcion:"Proyecto RENPER (Genneia).", fuente:"RENPER / Gobierno San Juan" },
  { id:"caldenes_oeste", tipo:"solar", nombre:"Caldenes del Oeste", provincia:"San Juan (Caldenes)", lat:-31.6, lon:-68.4, potencia_mw:24.75, inauguracion:2019, descripcion:"Planta fotovoltaica.", fuente:"OpenInfraMap" },

  /* ---------- SOLARES: La Rioja ---------- */
  { id:"la_rioja_norte", tipo:"solar", nombre:"Parque Solar La Rioja Norte", provincia:"La Rioja", lat:-29.41, lon:-66.86, potencia_mw:15, inauguracion:2021, descripcion:"Proyecto provincial / MATER.", fuente:"RENPER" },
  { id:"nonogasta", tipo:"solar", nombre:"PS Nonogasta", provincia:"La Rioja (Nonogasta)", lat:-29.0, lon:-66.82, potencia_mw:22.36, inauguracion:2022, descripcion:"Proyecto RENPER (PS La Rioja III).", fuente:"RENPER" },

  /* ---------- SOLARES: Jujuy ---------- */
  { id:"cauchari_i", tipo:"solar", nombre:"Cauchari I/II/III (complejo)", provincia:"Jujuy (Puna)", lat:-23.5, lon:-66.5, potencia_mw:300, inauguracion:2019, descripcion:"Complejo fotovoltaico de gran escala en la Puna juje√±a.", fuente:"Gob. Jujuy / RENPER" },
  { id:"iguazu_jujuy", tipo:"solar", nombre:"Parque Solar (Jujuy - otros)", provincia:"Jujuy", lat:-23.2, lon:-65.8, potencia_mw:50, inauguracion:2020, descripcion:"Plantas fotovoltaicas varias en provincia.", fuente:"Gob. Jujuy" },

  /* ---------- E√ìLICOS: Chubut (lista amplia, seg√∫n Wikipedia + fuentes sectoriales) ---------- */
  // Puerto Madryn / Madryn I (GENNEIA)
  { id:"puerto_madryn_i", tipo:"eolico", nombre:"Puerto Madryn I (Parque Madryn)", provincia:"Chubut (Puerto Madryn)", lat:-42.76, lon:-65.05, potencia_mw:220.3, inauguracion:2018, descripcion:"Parque e√≥lico Puerto Madryn (Genneia).", fuente:"Wikipedia / GENNEIA" },
  // Rawson I / II / III
  { id:"rawson_i", tipo:"eolico", nombre:"Rawson I", provincia:"Chubut (Rawson)", lat:-43.29, lon:-65.1, potencia_mw:48.6, inauguracion:2012, descripcion:"Rawson I (Genneia).", fuente:"Wikipedia" },
  { id:"rawson_ii", tipo:"eolico", nombre:"Rawson II", provincia:"Chubut (Rawson)", lat:-43.30, lon:-65.12, potencia_mw:28.8, inauguracion:2012, descripcion:"Rawson II (Genneia).", fuente:"Wikipedia" },
  { id:"rawson_iii", tipo:"eolico", nombre:"Rawson III", provincia:"Chubut (Rawson)", lat:-43.31, lon:-65.14, potencia_mw:25, inauguracion:2017, descripcion:"Rawson III.", fuente:"Wikipedia" },
  // Loma Blanca (varias etapas)
  { id:"loma_blanca_iv", tipo:"eolico", nombre:"Loma Blanca IV", provincia:"Chubut (Trelew)", lat:-43.2, lon:-65.3, potencia_mw:51, inauguracion:2013, descripcion:"Loma Blanca (varias etapas).", fuente:"Wikipedia" },
  { id:"loma_blanca_vi", tipo:"eolico", nombre:"Loma Blanca VI", provincia:"Chubut", lat:-43.15, lon:-65.25, potencia_mw:54.4, inauguracion:2019, descripcion:"Loma Blanca VI (ampliaci√≥n).", fuente:"thewindpower / Wikipedia" },
  // Manantiales Behr (Comodoro Rivadavia)
  { id:"manantiales_behr", tipo:"eolico", nombre:"Manantiales Behr", provincia:"Chubut (Comodoro Rivadavia)", lat:-45.78, lon:-67.5, potencia_mw:99, inauguracion:2018, descripcion:"Proyecto YPF Luz.", fuente:"Wikipedia / sectorial" },
  // Chubut Norte (varias etapas)
  { id:"chubut_norte_iii", tipo:"eolico", nombre:"Chubut Norte III", provincia:"Chubut (Puerto Madryn)", lat:-42.8, lon:-65.0, potencia_mw:57.66, inauguracion:2021, descripcion:"Chubut Norte (Genneia/PAE).", fuente:"Wikipedia" },
  { id:"chubut_norte_iv", tipo:"eolico", nombre:"Chubut Norte IV", provincia:"Chubut", lat:-42.79, lon:-65.02, potencia_mw:83, inauguracion:2021, descripcion:"Ampliaci√≥n Chubut Norte.", fuente:"Wikipedia" },

  // Otros relevantes reportados en fuentes
  { id:"aluar_i", tipo:"eolico", nombre:"Aluar I", provincia:"Chubut (Puerto Madryn)", lat:-42.77, lon:-65.03, potencia_mw:50.4, inauguracion:2019, descripcion:"Aluar I (peque√±a participaci√≥n).", fuente:"Wikipedia" },
  { id:"madryn_ii", tipo:"eolico", nombre:"Puerto Madryn II", provincia:"Chubut (Puerto Madryn)", lat:-42.75, lon:-65.07, potencia_mw:70, inauguracion:2019, descripcion:"Segunda etapa Madryn.", fuente:"GENNEIA / Wikipedia" },

  /* ---------- E√ìLICOS: Santa Cruz (proyectos y algunos operativos) ---------- */
  { id:"koluel_kayke", tipo:"eolico", nombre:"Koluel Kayke", provincia:"Santa Cruz (Koluel Kayke)", lat:-48.0, lon:-69.0, potencia_mw:25, inauguracion:2014, descripcion:"Parque Koluel Kayke (IMPSA / proyectos).", fuente:"Wikipedia / historia" },
  { id:"vientos_los_hercules", tipo:"eolico", nombre:"Vientos Los H√©rcules (Pico Truncado)", provincia:"Santa Cruz", lat:-46.5, lon:-69.1, potencia_mw:97.2, inauguracion:2017, descripcion:"Proyecto Total Eren / Mitsui.", fuente:"thewindpower / RENPER" },

  /* ---------- E√ìLICOS: Buenos Aires (selecci√≥n amplia) ---------- */
  { id:"villalonga", tipo:"eolico", nombre:"Villalonga", provincia:"Buenos Aires (Patagones)", lat:-39.0, lon:-62.7, potencia_mw:51.75, inauguracion:2018, descripcion:"Parque Villalonga (Genneia).", fuente:"Wikipedia" },
  { id:"vientos_del_secano", tipo:"eolico", nombre:"Vientos del Secano", provincia:"Buenos Aires", lat:-38.3, lon:-60.3, potencia_mw:100, inauguracion:2020, descripcion:"Proyecto de escala en Buenos Aires sur.", fuente:"sectorial / noticias" },
  { id:"mayor_buratovich", tipo:"eolico", nombre:"Mayor Buratovich", provincia:"Buenos Aires", lat:-38.8, lon:-62.9, potencia_mw:1.2, inauguracion:2000, descripcion:"Cooperativa local (parque peque√±o).", fuente:"OpenInfraMap" },

  /* ---------- BIOMASA: recopilaci√≥n nacional (varias provincias) ---------- */
  // Nota: dataset PROBIOMASA + listados oficiales
  { id:"sorrento_sf", tipo:"biomasa", nombre:"Planta Biomasa Sorrento (Santa Fe)", provincia:"Santa Fe", lat:-32.9, lon:-60.7, potencia_mw:7, inauguracion:2018, descripcion:"Planta de biomasa forestal (ejemplo: Sorrento).", fuente:"CADER / PROBIOMASA" },
  { id:"buyatti_sf", tipo:"biomasa", nombre:"Buyatti (bioel√©ctrica)", provincia:"Santa Fe", lat:-32.8, lon:-60.9, potencia_mw:15, inauguracion:2016, descripcion:"Central biomasa industrial.", fuente:"sectorial" },
  { id:"timbues", tipo:"biomasa", nombre:"Timb√∫es (biomasa/coincineraci√≥n)", provincia:"Santa Fe", lat:-32.7, lon:-60.7, potencia_mw:10, inauguracion:2017, descripcion:"Instalaci√≥n industrial-t√©rmica.", fuente:"datos.gob.ar / noticias" },
  { id:"tabacal_salta", tipo:"biomasa", nombre:"CT Tabacal (Salta)", provincia:"Salta", lat:-24.2, lon:-65.3, potencia_mw:32, inauguracion:2015, descripcion:"Central Tabacal (GENREN).", fuente:"RENPER / gobierno" },
  { id:"san_pedro_verde", tipo:"biomasa", nombre:"San Pedro Verde (Biomasa)", provincia:"Buenos Aires", lat:-33.2, lon:-59.5, potencia_mw:5, inauguracion:2014, descripcion:"Planta local de biomasa/biog√°s.", fuente:"datos.gob.ar" },
  { id:"bio_rio_cuarto", tipo:"biomasa", nombre:"Bioel√©ctrica R√≠o Cuarto", provincia:"C√≥rdoba", lat:-33.13, lon:-64.34, potencia_mw:12, inauguracion:2016, descripcion:"Planta de biomasa agroindustrial.", fuente:"sectorial / PROBIOMASA" },

  /* ---------- Ejemplos adicionales (por completitud) ---------- */
  { id:"garayalde", tipo:"eolico", nombre:"Parque E√≥lico Garayalde", provincia:"Buenos Aires", lat:-37.6, lon:-60.5, potencia_mw:24.15, inauguracion:2015, descripcion:"Parque de escala media.", fuente:"OpenInfraMap" },
  { id:"aulonia", tipo:"solar", nombre:"Parque Solar Iglesia - Gua√±izuil", provincia:"San Juan", lat:-30.8, lon:-67.1, potencia_mw:80, inauguracion:2020, descripcion:"Iglesia / Gua√±izuil (gran parque solar).", fuente:"OpenInfraMap / RENPER" },

  /* ====== FIN DE LA LISTA (amplia) ======
     Si quer√©s que agregue m√°s plantas puntuales (nombres concretos),
     me pas√°s la lista y las agrego con coordenadas y fuentes precisas.
  */
];

/* --- Inicializar mapa --- */
const map = L.map('map', { minZoom: 3 }).setView([-37.5, -64], 4);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution:'¬© OpenStreetMap contributors' }).addTo(map);

/* --- Crear marcadores y l√≥gica de filtrado/listado/fichas --- */
const markers = [];

function crearMarker(p) {
  const marker = L.marker([p.lat, p.lon], { icon: icons[p.tipo] || icons.solar }).addTo(map);
  const popupHtml = `<strong>${p.nombre}</strong><br><small class="tag">${p.tipo.toUpperCase()}</small><br>
    <div class="info-row"><span>Potencia:</span><strong>${p.potencia_mw ?? p.potencia ?? '‚Äî' } ${p.potencia_mw ? 'MW' : ''}</strong></div>
    <div class="info-row"><span>Inauguraci√≥n:</span><strong>${p.inauguracion ?? '‚Äî'}</strong></div>
    <div style="margin-top:6px;"><button data-id="${p.id}" class="verFicha">Ver ficha completa</button></div>`;
  marker.bindPopup(popupHtml);
  marker.plantaId = p.id;
  markers.push({ marker, planta: p });
}

plantas.forEach(crearMarker);

/* Filtrado y listado */
function refrescarListado() {
  const checks = Array.from(document.querySelectorAll('.filter:checked')).map(n=>n.value);
  const listaDiv = document.getElementById('listado');
  listaDiv.innerHTML = '';
  markers.forEach(obj => {
    const p = obj.planta;
    const visible = checks.includes(p.tipo);
    if (visible) {
      obj.marker.addTo(map);
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<strong>${p.nombre}</strong>
        <div class="tag">${p.tipo.toUpperCase()}</div>
        <div class="info-row"><span>Potencia</span><strong>${p.potencia_mw ?? p.potencia ?? '‚Äî'} ${p.potencia_mw ? 'MW' : ''}</strong></div>
        <div style="margin-top:6px"><button data-id="${p.id}" class="zoomTo">Ir al mapa</button>
          <button data-id="${p.id}" class="openFicha">Ficha</button></div>`;
      listaDiv.appendChild(card);
    } else {
      map.removeLayer(obj.marker);
    }
  });
}

document.querySelectorAll('.filter').forEach(cb => cb.addEventListener('change', refrescarListado));
refrescarListado();

document.getElementById('resetFit').addEventListener('click', ()=> {
  const group = L.featureGroup(markers.filter(m=>map.hasLayer(m.marker)).map(m=>m.marker));
  if (group.getLayers().length) map.fitBounds(group.getBounds().pad(0.15));
});

/* Delegaci√≥n: botones */
document.body.addEventListener('click', (ev) => {
  const t = ev.target;
  if (t.matches('.verFicha') || t.matches('.openFicha')) {
    abrirFicha(t.dataset.id);
  }
  if (t.matches('.zoomTo')) {
    const id = t.dataset.id;
    const mobj = markers.find(x => x.planta.id === id);
    if (mobj) {
      map.setView(mobj.marker.getLatLng(), 8);
      mobj.marker.openPopup();
    }
  }
});

/* Ficha lateral */
function abrirFicha(id) {
  const p = plantas.find(x=>x.id===id);
  if (!p) return;
  const ficha = document.getElementById('ficha');
  ficha.style.display = 'block';
  ficha.innerHTML = `
    <h3>${p.nombre}</h3>
    <div class="tag">${p.tipo.toUpperCase()}</div>
    <p><strong>Provincia:</strong> ${p.provincia ?? '‚Äî'}</p>
    <p><strong>Potencia instalada:</strong> ${p.potencia_mw ?? p.potencia ?? '‚Äî'} ${p.potencia_mw ? 'MW' : ''}</p>
    <p><strong>A√±o de inauguraci√≥n:</strong> ${p.inauguracion ?? '‚Äî'}</p>
    <p><strong>Coordenadas:</strong> ${p.lat}, ${p.lon}</p>
    <p>${p.descripcion ?? ''}</p>
    <p><small><strong>Fuente:</strong> ${p.fuente ?? 'Pendiente'}</small></p>
    <div style="margin-top:8px">
      <button id="centerOn">Centrar en el mapa</button>
      <button id="exportJSON">Exportar datos (JSON)</button>
      <button id="cerrarFicha">Cerrar</button>
    </div>
  `;
  document.getElementById('centerOn').addEventListener('click', ()=> map.setView([p.lat,p.lon],8));
  document.getElementById('exportJSON').addEventListener('click', ()=> {
    const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(p, null, 2));
    const a = document.createElement('a'); a.href = dataStr; a.download = `${p.id}.json`; a.click();
  });
  document.getElementById('cerrarFicha').addEventListener('click', ()=> ficha.style.display='none');
}

/* Ajuste de vista inicial */
document.getElementById('resetFit').click();

</script>

</body>
</html>

            { name: "02. Calculadora de Consumo (Hogar)", path: "casaconsumo-main/index.html" },
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Calculadora Energ√©tica Argentina (C1)</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- html2pdf.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
  body{
    font-family:Arial,Helvetica,sans-serif;
    margin:0;
    background:#f3f7fb;
    color:#222;
    padding:18px;
    display:flex;
    justify-content:center;
  }

  .app{
    width:100%;
    max-width:1100px;
    background:#fff;
    border-radius:12px;
    padding:18px;
    box-shadow:0 8px 30px rgba(10,20,40,0.08);
  }

  header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    flex-wrap:wrap;
  }

  h1{margin:0;font-size:20px;color:#0b5ed7;}

  .grid{
    display:grid;
    grid-template-columns:1fr 420px;
    gap:16px;
    margin-top:12px;
  }

  .panel{
    background:#fcfeff;
    border-radius:10px;
    padding:12px;
    border:1px solid #eef4fb;
  }

  label{font-size:13px;color:#556}

  select,input{
    width:100%;
    padding:8px;
    border-radius:6px;
    border:1px solid #cfdde9;
    background:transparent;
  }

  .btn{
    padding:10px 12px;
    border-radius:8px;
    border:0;
    color:#fff;
    cursor:pointer;
    font-weight:700;
  }

  .primary{background:#0b5ed7}
  .success{background:#16a34a}
  .warn{background:#f59e0b}

  .apartado-item{
    display:flex;
    gap:8px;
    align-items:center;
    padding:8px;
    border-radius:8px;
    background:#f7fbff;
    margin-top:8px;
  }

  .apartado-item input{
    flex:1;
    padding:6px;
  }

  .apartado-item button{
    background:#dc3545;
    border:0;
    padding:8px 12px;
    border-radius:6px;
    color:#fff;
  }

  .resultado-total{
    margin-top:10px;
    padding:10px;
    border-radius:8px;
    background:#eef9f0;
    border:1px solid #d7f3de;
  }

  canvas{
    width:100%!important;
    height:260px!important;
  }

  footer{
    margin-top:14px;
    font-size:13px;
    color:#667;
  }

  @media(max-width:980px){
    .grid{grid-template-columns:1fr}
  }
</style>
</head>

<body>

<div class="app" id="appRoot">

  <header>
    <div>
      <h1>üè° Calculadora Energ√©tica Argentina (C1)</h1>
      <div style="font-size:13px;color:#5b6b7a">Tarifas oficiales promedio por provincia ‚Äì Opci√≥n C1</div>
    </div>

    <button id="exportPDF" class="btn primary">üìÑ Exportar PDF</button>
  </header>

  <div class="grid">

    <!-- LEFT -->
    <div>
      <div class="panel">
        <h3>1) Ubicaci√≥n y tarifa</h3>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <div style="flex:1;min-width:160px">
            <label>Provincia</label>
            <select id="provinciaSelect"></select>
          </div>
          <div style="flex:1;min-width:160px">
            <label>Regi√≥n / Subregi√≥n</label>
            <select id="regionSelect"></select>
          </div>
          <div style="flex:1;min-width:160px">
            <label>Empresa predominante</label>
            <select id="empresaSelect"></select>
          </div>
          <div style="flex:1;min-width:120px">
            <label>Segmento</label>
            <select id="segmentoSelect">
              <option value="N1">N1</option>
              <option value="N2">N2</option>
              <option value="N3">N3</option>
            </select>
          </div>
        </div>

        <div style="display:flex;gap:8px;margin-top:8px">
          <div style="flex:1">
            <label>Horas solares (h/d√≠a)</label>
            <input id="horasInput" type="number" step="0.1">
          </div>
          <div style="flex:1">
            <label>Tarifa $/kWh</label>
            <input id="tarifaInput" type="number" step="0.1">
          </div>
        </div>
      </div>

      <div class="panel" style="margin-top:12px">
        <h3>2) Electrodom√©sticos</h3>
        <button id="btnAgregar" class="btn success">‚ûï Agregar aparato</button>

        <div id="listaAparatos" style="margin-top:10px"></div>

        <div style="display:flex;gap:8px;margin-top:10px">
          <button id="btnCalcular" class="btn primary">Calcular consumo</button>
          <button id="btnLimpiar" class="btn warn">Limpiar</button>
        </div>

        <div class="resultado-total" id="resumen">
          <div id="textoConsumo">Consumo: 0.000 kWh/d√≠a ‚Ä¢ 0 kWh/mes ‚Ä¢ 0 kWh/a√±o</div>
          <div id="textoCosto" style="margin-top:6px">$0 / mes (estimado)</div>
        </div>
      </div>

      <div class="panel" style="margin-top:12px">
        <h3>3) Sugerencias y ranking</h3>
        <ul id="listaSugerencias"></ul>
        <h4>Ranking por consumo</h4>
        <ol id="ranking"></ol>
      </div>
    </div>

    <!-- RIGHT -->
    <div>
      <div class="panel">
        <h3>Gr√°fico de consumo</h3>
        <canvas id="chartConsumo"></canvas>
      </div>

      <div class="panel" style="margin-top:12px">
        <h3>Dimensionamiento solar</h3>
        <div id="dimensionSolar">‚Äî</div>

        <label style="margin-top:8px">% backup</label>
        <input id="backupInput" type="number" value="20" min="0" max="100">
      </div>

      <div class="panel" style="margin-top:12px">
        <h3>Compartir</h3>
        <button id="btnWhats" class="btn success">üì≤ WhatsApp</button>
      </div>
    </div>
  </div>

<footer>
  Datos base: ENRE ‚Ä¢ EPRE ‚Ä¢ EPEC ‚Ä¢ EPE ‚Ä¢ EMSA ‚Ä¢ EDENOR ‚Ä¢ EDESUR ‚Ä¢ Tarifas 2024/2025 (promedio provincial C1)
</footer>

</div>

<script>
/* ==========================================================================
   BASE DE DATOS COMPLETA (C1 ‚Äì 24 provincias)
   ========================================================================== */

const DATA = {
  "Buenos Aires": { regiones:{ "AMBA":{horas:4.2} }, empresa:"EDENOR/EDESUR", tarifa:{N1:113.88,N2:108.52,N3:95.85}},
  "Ciudad Aut√≥noma de Buenos Aires": { regiones:{ "CABA":{horas:4.2}}, empresa:"EDESUR/EDENOR", tarifa:{N1:113.88,N2:108.52,N3:95.85}},
  "Catamarca": { regiones:{ Capital:{horas:4.9}}, empresa:"EDECAT", tarifa:{N1:150,N2:110,N3:70}},
  "Chaco": { regiones:{ Resistencia:{horas:4.8}}, empresa:"SECHEEP", tarifa:{N1:160,N2:120,N3:80}},
  "Chubut": { regiones:{ "Comodoro Rivadavia":{horas:4.6}}, empresa:"Servicios P√∫blicos Chubut", tarifa:{N1:155,N2:115,N3:75}},
  "C√≥rdoba": { regiones:{ Capital:{horas:5.0}}, empresa:"EPEC", tarifa:{N1:158,N2:118,N3:70}},
  "Corrientes": { regiones:{ Capital:{horas:5.1}}, empresa:"DPEC", tarifa:{N1:152,N2:112,N3:72}},
  "Entre R√≠os": { regiones:{ Paran√°:{horas:4.9}}, empresa:"Ente Entrerriano", tarifa:{N1:150,N2:110,N3:70}},
  "Formosa": { regiones:{ Formosa:{horas:5.0}}, empresa:"EPEF", tarifa:{N1:150,N2:110,N3:70}},
  "Jujuy": { regiones:{ "San Salvador":{horas:5.6}}, empresa:"EJESA", tarifa:{N1:157,N2:117,N3:77}},
  "La Pampa": { regiones:{ "Santa Rosa":{horas:4.6}}, empresa:"EPAS", tarifa:{N1:150,N2:110,N3:70}},
  "La Rioja": { regiones:{ Capital:{horas:5.2}}, empresa:"EDELAR", tarifa:{N1:152,N2:112,N3:72}},
  "Mendoza": { regiones:{ Capital:{horas:5.6}}, empresa:"EDEMSA", tarifa:{N1:150,N2:110,N3:68}},
  "Misiones": { regiones:{ Posadas:{horas:4.9}}, empresa:"EMSA", tarifa:{N1:155,N2:115,N3:75}},
  "Neuqu√©n": { regiones:{ Capital:{horas:4.8}}, empresa:"EPEN", tarifa:{N1:160,N2:120,N3:80}},
  "R√≠o Negro": { regiones:{ Viedma:{horas:4.7}}, empresa:"EDERSA", tarifa:{N1:160,N2:120,N3:80}},
  "Salta": { regiones:{ Capital:{horas:5.4}}, empresa:"EDESA", tarifa:{N1:158,N2:118,N3:78}},
  "San Juan": { regiones:{ Capital:{horas:5.1}}, empresa:"EPRE San Juan", tarifa:{N1:150,N2:110,N3:70}},
  "San Luis": { regiones:{ Capital:{horas:4.8}}, empresa:"EDEPROV", tarifa:{N1:150,N2:110,N3:70}},
  "Santa Cruz": { regiones:{ "R√≠o Gallegos":{horas:4.3}}, empresa:"SPSE", tarifa:{N1:160,N2:120,N3:80}},
  "Santa Fe": { regiones:{ Rosario:{horas:4.9}}, empresa:"EPE", tarifa:{N1:472.14,N2:48.42,N3:57.28}},
  "Santiago del Estero": { regiones:{ Capital:{horas:5.0}}, empresa:"EDEST", tarifa:{N1:150,N2:110,N3:70}},
  "Tierra del Fuego": { regiones:{ Ushuaia:{horas:4.4}}, empresa:"DPE", tarifa:{N1:165,N2:125,N3:85}},
  "Tucum√°n": { regiones:{ "San Miguel":{horas:5.0}}, empresa:"EDET", tarifa:{N1:150,N2:110,N3:70}}
};

/* ==========================================================================
   POBLAR SELECTS
   ========================================================================== */

const provinciaSelect = document.getElementById('provinciaSelect');
const regionSelect = document.getElementById('regionSelect');
const empresaSelect = document.getElementById('empresaSelect');
const segmentoSelect = document.getElementById('segmentoSelect');
const horasInput = document.getElementById('horasInput');
const tarifaInput = document.getElementById('tarifaInput');

Object.keys(DATA).forEach(p=>{
  const o = document.createElement("option");
  o.value=p; o.textContent=p;
  provinciaSelect.appendChild(o);
});

function poblarRegiones(){
  regionSelect.innerHTML='';
  const prov = provinciaSelect.value;
  Object.keys(DATA[prov].regiones).forEach(r=>{
    const o=document.createElement("option");
    o.value=r; o.textContent=r;
    regionSelect.appendChild(o);
  });
}

function poblarEmpresa(){
  empresaSelect.innerHTML='';
  const prov = provinciaSelect.value;
  const emp = DATA[prov].empresa;
  const o=document.createElement("option");
  o.value=emp; o.textContent=emp;
  empresaSelect.appendChild(o);
}

function aplicarAuto(){
  const prov = provinciaSelect.value;
  const reg = regionSelect.value;
  const seg = segmentoSelect.value;

  horasInput.value = DATA[prov].regiones[reg].horas;
  tarifaInput.value = DATA[prov].tarifa[seg];
}

provinciaSelect.onchange=()=>{poblarRegiones(); poblarEmpresa(); aplicarAuto();};
regionSelect.onchange=aplicarAuto;
empresaSelect.onchange=aplicarAuto;
segmentoSelect.onchange=aplicarAuto;

/* iniciar */
poblarRegiones();
poblarEmpresa();
aplicarAuto();

/* ==========================================================================
   APARATOS
   ========================================================================== */

const listaAparatos=document.getElementById('listaAparatos');

function crearAparato(nombre='',pot='',horas=''){
  const div=document.createElement('div');
  div.className='apartado-item';
  div.innerHTML=`
    <input class="inp-nombre" value="${nombre}" placeholder="Aparato (Ej: Heladera)">
    <input class="inp-pot" type="number" value="${pot}" placeholder="W">
    <input class="inp-h" type="number" value="${horas}" min="0" max="24" step="0.1" placeholder="Horas/d√≠a">
    <button class="del">üóëÔ∏è</button>`;
  div.querySelector('.del').onclick=()=>{div.remove(); calcular()};
  listaAparatos.appendChild(div);
}

document.getElementById('btnAgregar').onclick=()=>crearAparato();

crearAparato('Heladera',150,24);
crearAparato('Televisor',120,5);
crearAparato('Foco LED (x4)',40,6);

/* ==========================================================================
   C√ÅLCULO
   ========================================================================== */

const textoConsumo=document.getElementById('textoConsumo');
const textoCosto=document.getElementById('textoCosto');
const listaSugerencias=document.getElementById('listaSugerencias');
const ranking=document.getElementById('ranking');
const backupInput=document.getElementById('backupInput');
const dimensionSolarEl=document.getElementById('dimensionSolar');
const btnCalcular=document.getElementById('btnCalcular');
const btnLimpiar=document.getElementById('btnLimpiar');

let chart=null;

function calcular(){
  const items=document.querySelectorAll('.apartado-item');
  let total=0;
  let detalle=[];

  items.forEach(i=>{
    const n=i.querySelector('.inp-nombre').value;
    const p=parseFloat(i.querySelector('.inp-pot').value)||0;
    const h=parseFloat(i.querySelector('.inp-h').value)||0;
    if(p>0){
      const k=(p*h)/1000;
      total+=k;
      detalle.push({nombre:n,kwh:k});
    }
  });

  const mensual=total*30;
  const anual=total*365;
  const tarifa=parseFloat(tarifaInput.value)||0;
  const costoMes=mensual*tarifa;

  textoConsumo.textContent=`Consumo: ${total.toFixed(3)} kWh/d√≠a ‚Ä¢ ${mensual.toFixed(1)} kWh/mes ‚Ä¢ ${anual.toFixed(1)} kWh/a√±o`;
  textoCosto.textContent=`$${Math.round(costoMes)} / mes`;

  detalle.sort((a,b)=>b.kwh-a.kwh);
  ranking.innerHTML='';
  detalle.forEach(d=>{
    ranking.innerHTML+=`<li>${d.nombre}: ${d.kwh.toFixed(3)} kWh/d√≠a</li>`;
  });

  listaSugerencias.innerHTML='';
  if(total>8) listaSugerencias.innerHTML+='<li>Baj√° el uso del aire acondicionado.</li>';
  if(total>5) listaSugerencias.innerHTML+='<li>Cambi√° toda la iluminaci√≥n a LED.</li>';
  if(total>3) listaSugerencias.innerHTML+='<li>Revis√° la eficiencia de la heladera.</li>';
  if(total<3) listaSugerencias.innerHTML+='<li>Muy buen nivel de eficiencia.</li>';
  if(detalle[0] && detalle[0].kwh/total>0.4) listaSugerencias.innerHTML+=`<li>${detalle[0].nombre} consume m√°s del 40%.</li>`;

  generarGrafico(detalle);
  dimensionarSolar(total);

  return {total,mensual,anual,costoMes,detalle};
}

btnCalcular.onclick=calcular;

btnLimpiar.onclick=()=>{
  listaAparatos.innerHTML='';
  crearAparato('Heladera',150,24);
  crearAparato('Televisor',120,5);
  crearAparato('Foco LED (x4)',40,6);
  textoConsumo.textContent='Consumo: 0.000 kWh/d√≠a ‚Ä¢ 0 kWh/mes ‚Ä¢ 0 kWh/a√±o';
  textoCosto.textContent='$0 / mes';
  listaSugerencias.innerHTML='';
  ranking.innerHTML='';
  dimensionSolarEl.textContent='‚Äî';
  if(chart){chart.destroy(); chart=null;}
}

/* ==========================================================================
   GRAFICO
   ========================================================================== */

function generarGrafico(detalle){
  const ctx=document.getElementById('chartConsumo');
  if(chart) chart.destroy();
  chart=new Chart(ctx,{
    type:'bar',
    data:{
      labels:detalle.map(x=>x.nombre),
      datasets:[{
        label:'kWh/d√≠a',
        data:detalle.map(x=>x.kwh),
        backgroundColor:'rgba(11,94,215,0.6)'
      }]
    },
    options:{responsive:true,scales:{y:{beginAtZero:true}}}
  });
}

/* ==========================================================================
   DIMENSIONAMIENTO SOLAR
   ========================================================================== */

function dimensionarSolar(kwhDia){
  const horas=parseFloat(horasInput.value)||5;
  const factor=1.3;
  const potencia=(kwhDia/horas)*factor;
  const paneles=Math.ceil(potencia/0.45);
  const backup=parseFloat(backupInput.value)||0;
  const bateria=(kwhDia*(backup/100)).toFixed(2);

  dimensionSolarEl.innerHTML=
    `Necesit√°s: <b>${potencia.toFixed(2)} kW</b> (~${paneles} paneles).<br>
     Backup ${backup}% ‚Üí Bater√≠a: ${bateria} kWh.`;
}

/* ==========================================================================
   WHATSAPP
   ========================================================================== */

document.getElementById('btnWhats').onclick=()=>{
  const res=calcular();
  const msg=`Mi consumo energ√©tico es ${res.total.toFixed(2)} kWh/d√≠a.`;
  window.open('https://api.whatsapp.com/send?text='+encodeURIComponent(msg),'_blank');
};

/* ==========================================================================
   PDF
   ========================================================================== */

document.getElementById('exportPDF').onclick=()=>{
  html2pdf().set({margin:10,filename:'reporte_energia.pdf'}).from(document.querySelector('.app')).save();
};

/* iniciar */
calcular();
</script>

</body>
</html>
            { name: "03. Simulador E√≥lico (Producci√≥n)", path: "eolica01-main/index.html" },
            { name: "04. Simulador Fotovoltaico (Panel)", path: "fotovol-main/index.html" },
            { name: "05. Demostraci√≥n Hidroel√©ctrica", path: "hidro-main/index.html" },
            { name: "06. Simulador Nuclear por Fisi√≥n", path: "NU1-main/index.html" },
            { name: "07. Simulador de Mezcla de Biocombustibles (B%)", path: "biodisel-main/index.html" },
            { name: "08. Autoevaluaci√≥n de Energ√≠as Alternativas", path: "autoeva-main/index.html" },
        ];

        const select = document.getElementById('simulador-select');
        const frame = document.getElementById('simulador-frame');
        const placeholder = document.getElementById('placeholder');

        // Funci√≥n para llenar el men√∫ desplegable (select)
        function llenarSelector() {
            // Opci√≥n por defecto
            let defaultOption = document.createElement('option');
            defaultOption.value = "";
            defaultOption.textContent = "-- Selecciona uno para cargar --";
            defaultOption.disabled = true;
            defaultOption.selected = true;
            select.appendChild(defaultOption);

            // Agregar las opciones de los simuladores
            simuladores.forEach(sim => {
                let option = document.createElement('option');
                option.value = sim.path;
                option.textContent = sim.name;
                select.appendChild(option);
            });
        }

        // Funci√≥n para cargar el simulador en el iframe
        function cargarSimulador() {
            const selectedPath = select.value;
            if (selectedPath) {
                // Establece la URL del simulador
                frame.src = selectedPath;
                // Muestra el iframe y oculta el mensaje de bienvenida
                frame.style.display = 'block';
                placeholder.style.display = 'none';
            } else {
                alert("Por favor, selecciona un simulador de la lista.");
            }
        }

        // Inicializar el selector al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', llenarSelector);
    </script>
</body>
</html>
